#include <stdio.h>
#include "pico/stdlib.h"
#include "hardware/pio.h"
#include "hardware/clocks.h"

#include "ws2818b.pio.h"

#include "includes/funcoesMatriz.h"
#include "includes/teclado.h"
#include "includes/convertePixels.h"


#define MATRIX_ROWS 5
#define MATRIX_COLS 5
#define MATRIX_DEPTH 3


int main() {
    npLED_t leds[LED_COUNT];
    int rgb_matrix[MATRIX_ROWS][MATRIX_COLS][MATRIX_DEPTH];
    
    uint32_t animation[16][25] = {
{
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a
},
{
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a
},
{
0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000
},
{
0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000
},
{
0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 
0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a
},
{
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a
},
{
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a
},
{
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0x00000000
},
{
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 
0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0x00000000, 0xff00dd2a
},
{
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 
0xff00dd2a, 0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000
},
{
0x00000000, 0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 
0xff00dd2a, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000
},
{
0x00000000, 0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 
0x00000000, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a
},
{
0x00000000, 0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0xff00dd2a, 0x00000000
},
{
0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 
0xff00dd2a, 0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 
0x00000000, 0x00000000, 0xff00dd2a, 0x00000000, 0x00000000
},
{
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 
0x00000000, 0xff00dd2a, 0x00000000, 0x00000000, 0x00000000
},
{
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
0xff00dd2a, 0x00000000, 0x00000000, 0x00000000, 0x00000000
}
};

    stdio_init_all(); 
    keypad_init();

    matrizInit(LED_PIN, leds);

    while (true) {

        npClear(leds);
        int i = 0;
        int j = 0;

        for(i = 0; i < 3; i++) {
            for (j = 0; i < LED_COUNT; j++) {
                convertARGBtoMatriz(animation[j], rgb_matrix);
                spriteWirite(rgb_matrix, leds);
                matrizWrite(leds);
                sleep_ms(500);
            }
        }

        char key = keypad_read();
        sleep_ms(1000);
       
        if (key == '1') {
            printf("Você pressionou 1\n"); // implementação da funcionalidade 1
        } else if (key == '2') {
            printf("Você pressionou 2\n"); // implementação da funcionalidade 2
        } else if (key == '3') {
            printf("Você pressionou 3\n"); // implementação da funcionalidade 3
        } else if (key == '4') {
            printf("Você pressionou 4\n"); // implementação da funcionalidade 4
        } else if (key == '5') {
            printf("Você pressionou 5\n"); // implementação da funcionalidade 5
        } else if (key == '6') {
            printf("Você pressionou 6\n"); // implementação da funcionalidade 6
        } else if (key == '7') {
            printf("Você pressionou 7\n"); // implementação da funcionalidade 7
        } else if (key == '8') {
            printf("Você pressionou 8\n"); // implementação da funcionalidade 8
        } else if (key == '9') {
            printf("Você pressionou 9\n"); // implementação da funcionalidade 9
        } else if (key == '0') {
            printf("Você pressionou 0\n"); // implementação da funcionalidade 10
        } else if (key == 'A') {
            printf("Você pressionou A\n"); // implementação da funcionalidade 11
        } else if (key == 'B') {
            printf("Você pressionou B\n"); // implementação da funcionalidade 12
        } else if (key == 'C') {
            printf("Você pressionou C\n"); // implementação da funcionalidade 13
        } else if (key == 'D') {
            printf("Você pressionou D\n"); // implementação da funcionalidade 14
        } else if (key == '*') {
            printf("Você pressionou *\n"); // implementação da funcionalidade 15
        } else if (key == '#') {
            printf("Você pressionou #\n"); // implementação da funcionalidade 16
        } else {
            printf("Tecla não reconhecida\n"); // implementação da funcionalidade 17
        }
    }
}
